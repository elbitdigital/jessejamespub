<!DOCTYPE html>
<html lang="pt-br">
<meta charset="UTF-8">
<title>Galeria | Assis | Jesse James Pub</title>
<meta name="viewport"
      content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0"/>

<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<!--<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">-->
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#4c2f0f">
<meta name="apple-mobile-web-app-title" content="Jesse James Pub">
<meta name="application-name" content="Jesse James Pub">
<meta name="theme-color" content="#ebc373">

<meta name="description" content="#VemPubiar">
<meta name="image" content="https://jessejamespub.com.br/assis/meta/galeria.jpg">

<meta itemprop="name" content="Galeria de Fotos - Assis - Jesse James Pub">
<meta itemprop="description" content="#VemPubiar">
<meta itemprop="image" content="https://jessejamespub.com.br/assis/meta/galeria.jpg">

<meta property="og:title" content="Galeria de Fotos - Assis - Jesse James Pub">
<meta property="og:description" content="Confira os últimos clicks!">
<meta property="og:image" content="https://jessejamespub.com.br/assis/meta/galeria.jpg">
<meta property="og:url" content="https://jessejamespub.com.br/assis/galeria">
<meta property="og:site_name" content="Jesse James Pub - Assis">
<meta property="og:locale" content="pt_BR">
<meta property="fb:app_id" content="1586666258259861">
<meta property="og:type" content="website">

<script src="/dist/js/villa.min.js"></script>
<link href="https://fonts.googleapis.com/css?family=Roboto+Slab:400,700" rel="stylesheet">
<link rel="stylesheet" href="/dist/css/villa.min.css"/>
<link rel="stylesheet" href="/dist/css/jessejamespub.min.css"/>
<!--[if lt IE 9]>
<link rel="stylesheet" type="text/css" href="/dist/css/material-colors.css"/>
<link rel="stylesheet" type="text/css" href="/dist/css/villa-cross.min.css"/>
<script src="/dist/js/html5shiv.js"></script>
<script src="/dist/js/html5shiv-printshiv.js"></script>
<script src="/dist/js/classList.min.js"></script>
<![endif]-->

<body class="Franchise roboto-slab marrom-couro-darker">

<div id="topo"></div>

<div class="bg-paper-full"></div>

<main id="galeria" class="FranchiseMain FranchiseMain--internal">

	<div class="FranchiseHeader">

		<div class="FranchiseHeader-background"></div>

		<div class="FranchiseHeader-inner container">

			<a id="logo" href="/assis" class="FranchiseHeaderLogo">
				<!-- SVG logo-assis -->
			</a>

			<div class="FranchiseHeaderNav">

				<a href="#topo" title="Ir para o topo" class="FranchiseMenuList-goTop">
					<span class="icon-angle-double-up"></span>
				</a>

				<div id="nav-toggle" class="FranchiseMenuList-toggle">
					<span class="icon-menu"></span>
					<span class="icon-cancel"></span>
				</div>

				<ul id="nav-menu" class="FranchiseMenuList FranchiseMenuList--header">

					<li class="FranchiseMenuList-item">
						<a href="/assis/reservas">Reservas</a>
					</li>

					<li class="FranchiseMenuList-item">
						<a href="/assis/galeria">Galeria</a>
					</li>

					<li class="FranchiseMenuList-item">
						<a href="/assis/especiais">Combday & Despedida</a>
					</li>

					<li class="FranchiseMenuList-item">
						<a href="/assis#promoter">Seja promoter</a>
					</li>

				</ul>

			</div>

		</div>

	</div>

	<ul id="nav-menu-top" class="FranchiseMenuList FranchiseMenuList--top">

		<li class="FranchiseMenuList-item">
			<a href="/assis">Assis</a>
		</li>

		<li class="FranchiseMenuList-item">
			<a href="/assis/reservas">Reservas</a>
		</li>

		<li class="FranchiseMenuList-item">
			<a href="/assis/galeria">Galeria</a>
		</li>

		<li class="FranchiseMenuList-item">
			<a href="/assis/especiais">Combday & Despedida</a>
		</li>

		<li class="FranchiseMenuList-item">
			<a href="/assis#promoter">Seja promoter</a>
		</li>

	</ul>

	<section class="FranchiseHero">

		<!--<div class="FranchiseHero-background"></div>-->

		<div id="gallery" class="Gallery FranchiseHero-inner container">

			<div class="LeadingTitle">
				<i class="LeadingTitle-orn icon-orn-left"></i>
				<h1 class="LeadingTitle-text">Galeria</h1>
				<i class="LeadingTitle-orn icon-orn-right"></i>
				<i class="LeadingTitle-orn LeadingTitle-orn--bot icon-orn-bot"></i>
			</div>

			<p class="Gallery-subtitle f-marrom-couro--darkest">Confira os clicks que rolaram no Jesse James Assis</p>

			<!--<div id="gallery-list" class="Gallery-list">-->

				<div id="gallery-loading" class="PlaceholderExternal">
					<p>Carregando álbums...</p>
					<div class="loader"></div>
				</div>

			<!--</div>-->

		</div>

	</section>

	<footer id="footer" class="FranchiseFooter">

		<div class="FranchiseFooter-background marrom-couro--darker"></div>

		<div class="FranchiseFooter-inner container">

			<div class="FranchiseFooter-item FranchiseFooter-item--contact">

				<div class="FranchiseFooterAddress">

					<span class="FranchiseFooterAddress-icon icon-location"></span>
					<div class="FranchiseFooterAddress-text">
						<p>Avenida Rui Barbosa, 1400</p>
						<p>Centro, Assis - SP</p>
					</div>

				</div>

				<div class="FranchiseFooterPhone">

					<span class="FranchiseFooterPhone-icon icon-whatsapp"></span>
					<div class="FranchiseFooterPhone-text">
						<a href="https://api.whatsapp.com/send?phone=55018997832412">18 99783 2412</a>
					</div>

				</div>

				<div class="FranchiseFooterMail">

					<span class="FranchiseFooterMail-icon icon-mail-alt"></span>
					<div class="FranchiseFooterMail-text">
						<a href="mailto:assis@jessejamespub.com.br">assis@jessejamespub.com.br</a>
					</div>

				</div>

			</div>

			<div class="FranchiseFooter-item FranchiseFooter-item--work">

				<div class="FranchiseFooterTime">

					<h2 class="FranchiseFooterTime-title">Horário de funcionamento</h2>
					<p class="FranchiseFooterTime-text">Sexta e Sábado: <br>das 21h às 04h
					</p>

				</div>

				<div class="FranchiseFooterCards">

					<h2 class="FranchiseFooterCards-title">Cartões</h2>
					<span class="FranchiseFooterCards-icon icon-cc-visa"></span>
					<span class="FranchiseFooterCards-icon icon-cc-master"></span>
					<span class="FranchiseFooterCards-icon icon-cc-elo"></span>
					<span class="FranchiseFooterCards-icon icon-cc-amex"></span>

				</div>

			</div>

			<div class="FranchiseFooter-item FranchiseFooter-item--brand">

				<a id="logo-footer" href="/assis" class="FranchiseFooterLogo">
					<!-- SVG logo-assis -->
				</a>

				<div class="FranchiseFooterSocial">

					<a href="https://www.facebook.com/jessejamespubassis/" class="FranchiseFooterSocial-icon icon-facebook-official"></a>
					<a href="https://www.instagram.com/jessejamesassis/" class="FranchiseFooterSocial-icon icon-instagram"></a>
					<!--<a href="https://www.tripadvisor.com.br/Restaurant_Review-g2205491-d11658154-Reviews-Jesse_James_Pub_Assis-Assis_State_of_Sao_Paulo.html" class="FranchiseFooterSocial-icon icon-tripadvisor"></a>-->

				</div>

			</div>

		</div>

	</footer>

</main>

<script src="/dist/js/jessejamespub.min.js"></script>

<script>

	var logo = new SvgAppend(document.getElementById('logo'), '/dist/img/svg/logo-assis.svg', function () {
		logo.cloneTo(document.getElementById('logo-footer'));
	});

	var sweetScroll = new SweetScroll({
		trigger: "a[href^='#']",
		duration: 800,
		quickMode: true
	});

	window.addEventListener('load', function () {

		var navToggle = document.getElementById("nav-toggle");
		var navMenu = document.getElementById("nav-menu-top");

		navToggle.addEventListener('click', function(e) {
			e.preventDefault();
			navToggle.classList.toggle('is-active');
			navMenu.classList.toggle('is-active');
		});

		navMenu.addEventListener('click', function() {
			navToggle.classList.toggle('is-active');
			navMenu.classList.toggle('is-active');
		});

		galleryInit();

	});

</script>

<script src="https://www.gstatic.com/firebasejs/4.2.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/4.2.0/firebase-database.js"></script>
<script src="/dist/js/firebase.js"></script>

<script>

	var pub_config = {
		CITY: 'assis',
		PAGE_ID: 1586666258259861,
		APP_TOKEN: '146544439255115|3_8Ip3wrGqx-BfnrEVVRhJeUpLA'
	};

	var databaseRef = firebase.database().ref('/');
	var houseRef = databaseRef.child(pub_config.CITY);

	var galleryRef = houseRef.child('gallery');
	var enabledRef = galleryRef.child('enabledAlbums');

</script>

<script src="/dist/js/axios.min.js"></script>

<script>

	var batched_albums = [];
	var batch_list = [];
	var albumCollection = [];
	var needleAlbum = false;
	var galleryNode = document.getElementById('gallery');
	var galleryLoadingElement = document.getElementById('gallery-loading');

	function galleryInit() {

		enabledRef.orderByKey().limitToLast(24).once('value', function (snapshot) {

			var i = 0;

			snapshot.forEach(function (child) {

				/* for posterity: needleAlbum refers to the album from where the next loading batch will/would resume */
				if (i == 0) {
					needleAlbum = child.key;
				}

				i++;

				albumCollection.push(child.val());

				batch_list.push({
					"method": "GET",
					"relative_url": child.key + "?fields=id, cover_photo.fields(id, height, width, picture, images)"
				});

			});

			batchRequestFirstBite(batch_list);

		});

	}

	function batchRequestFirstBite(batch_list_first) {

		axios.post('https://graph.facebook.com/v2.10/', {
			access_token: pub_config.APP_TOKEN,
			batch: batch_list_first,
			include_headers: "false"
		}).then(function (response) {

			batched_albums = response.data;

			var firstBiteGallery = createGalleryList(batched_albums);
			var buttonMore = createLoadMoreButton();

			galleryLoadingElement.parentNode.removeChild(galleryLoadingElement);
			galleryNode.appendChild(firstBiteGallery);
			galleryNode.appendChild(buttonMore);

		}).catch(function (err) {

//			document.getElementById('gallery').innerHTML = '<span style="color: red;">' + err.message + '</span>';

		});

	}

	function createGalleryList(received_albums) {

		var galleryNode = document.createElement('div');
		galleryNode.className = 'Gallery-list';

		for (var i = received_albums.length; i--;) {

			var album = JSON.parse(received_albums[i].body);
			var albumData = retriveAlbumData(album.id);

			var albumNode = document.createElement('a');
			albumNode.href = '/' + pub_config.CITY + '/album?id=' + album.fb_id;
			albumNode.className = 'Album';
			albumNode.title = albumData.fb_name;

			var albumBackgroundNode = document.createElement('div');
			albumBackgroundNode.className = 'Album-background';
			albumBackgroundNode.style.backgroundImage = 'url(' + album.cover_photo.images[5].source +')';

			var albumOverlayNode = document.createElement('div');
			albumOverlayNode.className = 'Album-overlay marrom-couro--darkest';

			var albumContentNode = document.createElement('div');
			albumContentNode.className = 'AlbumContent';

			var albumContentDate = document.createElement('h1');
			albumContentDate.className = 'AlbumContent-date';
			albumContentDate.textContent = albumData.date;

			var albumContentTitle = document.createElement('h2');
			albumContentTitle.className = 'AlbumContent-title';
			albumContentTitle.textContent = albumData.title;

			albumContentNode.appendChild(albumContentDate);
			albumContentNode.appendChild(albumContentTitle);

			albumNode.appendChild(albumBackgroundNode);
			albumNode.appendChild(albumOverlayNode);
			albumNode.appendChild(albumContentNode);

			galleryNode.appendChild(albumNode);

		}

		return galleryNode;

	}

	function createLoadMoreButton () {

		var buttonLoadMore = document.createElement('a');
		buttonLoadMore.id = 'gallery-button-loadMore';
		buttonLoadMore.href = 'https://www.facebook.com/pg/' + pub_config.PAGE_ID + '/photos/?tab=albums';
		buttonLoadMore.className = 'Gallery-button Button Button--idle';
		buttonLoadMore.innerHTML = 'Veja mais na nossa página <span class="icon-facebook-official"></span>';

		/* for posterity: this where you probable will need to use the needleAlbum */
//		buttonLoadMore.textContent = 'Carregar mais álbums';
//		buttonLoadMore.addEventListener('click', function() {
//
//			this.innerHTML = '<span class="icon-cw animate-spin"></span>';
//			batched_albums = [];
//			batch_list = [];
//			loadNextBatchAlbums();
//
//		});

		return buttonLoadMore;

	}


	function retriveAlbumData(albumId) {

		for (var s = 0; s < albumCollection.length; s++) {

			if (albumCollection[s].fb_id == albumId) {

				return albumCollection[s];

			}

		}

		return [];

	}

</script>

</body>

</html>